# 1. 路由

Vue Router 是 [Vue.js (opens new window)](http://cn.vuejs.org/)官方的路由管理器。它和 Vue.js 的核心深度集成，让构建单页面应用变得易如反掌。包含的功能有：

- 嵌套的路由/视图表
- 模块化的、基于组件的路由配置
- 路由参数、查询、通配符
- 基于 Vue.js 过渡系统的视图过渡效果
- 细粒度的导航控制
- 带有自动激活的 CSS class 的链接
- HTML5 历史模式或 hash 模式，在 IE9 中自动降级
- 自定义的滚动条行为



## 1.1 安装

1. 在package.json中添加vue-router的依赖

   ~~~js
    "vue-router": "^3.0.1",
   ~~~

   

2. 在src下新建router文件夹，并在其下创建index.js

   ~~~js
   import Vue from 'vue'
   import VueRouter from 'vue-router'
   
   Vue.use(VueRouter)
   
   
   //3. 创建 router 实例，然后传 `routes` 配置
   const router = new VueRouter({
   })
   
   export default router
   ~~~

3. 在main.js添加router的引入

   ~~~js
   import Vue from 'vue'
   import App from './App.vue'
   import router from './router'
   
   Vue.config.productionTip = false
   
   new Vue({
     router,
     render: h => h(App),
   }).$mount('#app')
   
   ~~~

4. npm install 安装依赖

## 1.2 入门

> 简单点理解，可以让我们在跳转页面的时候，不用新打开一个页面

将App.vue中的template修改如下：

~~~js
<template>
  <div id="app">
	  <p>
        <!-- 使用 router-link 组件来导航. -->
        <!-- 通过传入 `to` 属性指定链接. -->
        <!-- <router-link> 默认会被渲染成一个 `<a>` 标签 -->
        <router-link to="/foo">Go to Foo</router-link>
        <router-link to="/bar">Go to Bar</router-link>
      </p>
	  <!-- 路由出口 -->
	    <!-- 路由匹配到的组件将渲染在这里 -->
	    <router-view></router-view>
  </div>
</template>
~~~

在router下的index.js，修改如下：

~~~js
import Vue from 'vue'
import VueRouter from 'vue-router'

Vue.use(VueRouter)

// 1. 定义 (路由) 组件。
// 可以从其他文件 import 进来
const Foo = { template: '<div>foo</div>' }
const Bar = { template: '<div>bar</div>' }

// 2. 定义路由
// 每个路由应该映射一个组件。
const routes = [
  { path: '/foo', component: Foo },
  { path: '/bar', component: Bar }
]
//3. 创建 router 实例，然后传 `routes` 配置
const router = new VueRouter({
	routes
})

export default router
~~~

在项目根目录下创建vue.config.js

~~~js
module.exports = {
  runtimeCompiler: true,
}
~~~

重新启动进行测试。



## 1.3 动态路由

```js
const routes = [
  { path: '/foo', component: Foo },
  { path: '/bar', component: Bar },
  { path: '/user/:id', component: User }
]
```

> :id是路径参数，即 /user/aa, /user/bb 都会映射到相同的路由。

定义组件：

~~~js
const User = {template: '<div>User {{ $route.params.id }}</div>'}
~~~

通过`$route.params.id`获取路径参数

# 2. 博客首页

App.vue:

~~~js
<template>
  <div id="app">
	  <!-- 路由出口 -->
	    <!-- 路由匹配到的组件将渲染在这里 -->
	  <router-view></router-view>
	  <!--组件 回到顶部-->
	  <go-top></go-top>
  </div>
</template>

<script>
import GoTop from '@/components/gotop/GoTop'

export default {
  name: 'app',
  components: {
	  GoTop
  }
}
</script>



<style>
* { margin: 0; padding: 0; }

body {
	background-color: #f5f5f5;
	font-weight: 400;
	font-family: "Helvetica Neue",Helvetica,"PingFang SC","Hiragino Sans GB","Microsoft YaHei","微软雅黑",Arial,sans-serif;
	line-height: 1.5;
}
a {
    cursor: pointer;
    text-decoration: none;
	/* 动画效果，css的属性值在一定的时间内从一个状态平滑的过渡到另一个状态 ease-out　先快，后慢 */
    transition: none 86ms ease-out;
}
a:hover {
	color: #00aaff;
}

html{height:100%;}
body{min-height:100%;}
/*生成相对定位的元素，相对于其正常位置进行定位*/
body{position:relative;}

</style>

~~~

## 2.1 回到顶部组件

Vue 提供了 `transition` 的封装组件，在下列情形中，可以给任何元素和组件添加进入/离开过渡

- 条件渲染 (使用 `v-if`)
- 条件展示 (使用 `v-show`)
- 动态组件
- 组件根节点

在components下新建gotop目录，新建组件GoTop.vue

~~~js
<template>
  <!--<transition name="el-zoom-in-center">-->
  <transition>
    <div @click="toTop" v-show="topShow" class="me-to-top"><i class="el-icon-caret-top"></i></div>
  </transition>
</template>

<script>
  export default {
    name: 'GoTop',
    data() {
      return {
        topShow: false
      }
    },
    methods: {
      toTop() {
        document.body.scrollTop = 0;
        document.documentElement.scrollTop = 0;
        this.topShow = false;
      },
      needToTop() {
        let curHeight = document.documentElement.scrollTop || document.body.scrollTop;

        if (curHeight > 400) {
          this.topShow = true;
        } else {
          this.topShow = false;
        }

      }
    },
    mounted() {
      /**
       * 等到整个视图都渲染完毕
       */
      this.$nextTick(function () {
        window.addEventListener('scroll', this.needToTop);
      });
    }
  }
</script>

<style>
  .me-to-top {
    background-color: #fff;
    position: fixed;
    right: 100px;
    bottom: 150px;
    width: 40px;
    height: 40px;
    border-radius: 20px;
    cursor: pointer;
    transition: .3s;
    box-shadow: 0 0 6px rgba(0, 0, 0, .12);
    z-index: 5;
  }

  .me-to-top i {
    color: #00d1b2;
    display: block;
    line-height: 40px;
    text-align: center;
    font-size: 18px;
  }

</style>

~~~

## 2.2 添加首页的路由

> 新建views文件夹，用于存放页面
>
> 在views下新建 index.vue，做为首页
>
> 设置路由，访问根路径时，展示index.vue的内容

index.vue:

~~~html
<template>
	<div>
		
		我是首页
		
			<p style="height: 200px;">asd</p>
			<p style="height: 200px;">asd</p>
			<p style="height: 200px;">asd</p>
			<p style="height: 200px;">asd</p>
			<p style="height: 200px;">asd</p>
	</div>
</template>

<script>
</script>

<style>
</style>

~~~

router/index.js:

~~~js
const routes = [
  { path: '/', component: r => require.ensure([], () => r(require('@/views/Index')), 'index') },
]
~~~

运行发现：回到顶部的组件无样式，这是因为用到了`ELementUI`，我们还没有使用

## 2.3 引入ElementUI

~~~js
"element-ui": "^2.0.10",
~~~

main.js

~~~js
import ElementUI from 'element-ui'
import 'element-ui/lib/theme-chalk/index.css';
Vue.use(ElementUI)
~~~

安装 重新测试

## 2.4 首页布局

views/index.vue：

~~~html
<template>
  <div v-title data-title="码神之路-blog">
    <el-container>

      <el-main class="me-articles">
			主区域
		
      </el-main>

      <el-aside>

			侧边栏,右侧
      </el-aside>

    </el-container>
  </div>
</template>

<script>

  export default {
    name: 'Index',
    created() {
    },
    data() {
      return {
      }
    },
    methods: {
    },
    components: {
    }
  }
</script>

<style scoped>

  .el-container {
    width: 960px;
  }

  .el-aside {
    margin-left: 20px;
    width: 260px;
  }

  .el-main {
    padding: 0px;
    line-height: 16px;
  }

  .el-card {
    border-radius: 0;
  }

  .el-card:not(:first-child) {
    margin-top: 20px;
  }
</style>

~~~

## 2.5 文章列表

在components下新建article，在其下新建ArticleItem.vue:

~~~html
<template>
  <el-card class="me-area" :body-style="{ padding: '16px' }">
    <div class="me-article-header">

      <a @click="view(id)" class="me-article-title">{{title}}</a>
      <el-button v-if="weight > 0" class="me-article-icon" type="text">置顶</el-button>
      <span class="me-pull-right me-article-count">
	    	<i class="me-icon-comment"></i>&nbsp;{{commentCounts}}
	    </span>
      <span class="me-pull-right me-article-count">
	    	<i class="el-icon-view"></i>&nbsp;{{viewCounts}}
	    </span>
    </div>

    <div class="me-artile-description">
      {{summary}}
    </div>
    <div class="me-article-footer">
	  	<span class="me-article-author">
	    	<i class="me-icon-author"></i>&nbsp;<el-tag>{{author}}</el-tag>
	    </span>

      <el-tag v-for="t in tags" :key="t.tagName" size="mini" type="success">{{t.tagName}}</el-tag>

      <span class="me-pull-right me-article-count">
	    	<i class="el-icon-time"></i>&nbsp;{{createDate | format}}
	    </span>

    </div>
  </el-card>
</template>

<script>
  import { formatTime } from "../../utils/time";

  export default {
    name: 'ArticleItem',
    props: {
      id: String,
      weight: Number,
      title: String,
      commentCounts: Number,
      viewCounts: Number,
      summary: String,
      author: String,
      tags: Array,
      createDate: String
    },
    data() {
      return {}
    },
    methods: {
      view(id) {
        this.$router.push({path: `/view/${id}`})
      }
    }
  }
</script>

<style scoped>

  .me-article-header {
    /*padding: 10px 18px;*/
    padding-bottom: 10px;
  }

  .me-article-title {
    font-weight: 600;
  }

  .me-article-icon {
    padding: 3px 8px;
  }

  .me-article-count {
    color: #ff00ff;
    padding-left: 14px;
    font-size: 13px;
  }

  .me-pull-right {
    float: right;
  }

  .me-artile-description {
    font-size: 13px;
    line-height: 24px;
    margin-bottom: 10px;
  }

  .me-article-author {
    color: #aa00ff;
    padding-right: 18px;
    font-size: 13px;
  }

  .el-tag {
     margin-left: 6px;
     color: #ffffff;
     background-color: #ff00ff;
  }

</style>

~~~



用到的时间工具类：

utils/time.js

~~~js
export function formatTime(time) {
  const d = new Date(time)
  const now = Date.now()

  const diff = (now - d) / 1000

  if (diff < 30) {
    return '刚刚'
  } else if (diff < 3600) { // less 1 hour
    return Math.ceil(diff / 60) + '分钟前'
  } else if (diff < 3600 * 24) {
    return Math.ceil(diff / 3600) + '小时前'
  } else if (diff < 3600 * 24 * 2) {
    return '1天前'
  }

  return time
}

~~~



## 2.6 Main区域引入文章列表

> 上方定义组件后，我们在index.vue的el-main区域进行引入，并且给一些测试数据

在main.js 中 添加如下内容：

~~~js
import {formatTime} from "./utils/time";
//自定义指令
Vue.directive('title',  function (el, binding) {
  document.title = el.dataset.title
})
// 格式化时间
Vue.filter('format', formatTime)
~~~

index.vue:

~~~html
  <el-main class="me-articles">
		
			<ArticleItem 
				v-for="article in articles" :key="article.id" v-bind="article"
			 >
			</ArticleItem>
      </el-main>

~~~

定义测试数据：

~~~js
data() {
      return {
		articles:[
			{
				id:"1",
				weight:1,
				title:"标题1",
				commentCounts:123,
				viewCounts:123,
				summary:"概要11",
				author:"作者",
				tags:[{"tagName":"vue"}],
				createDate:"3333"
			},
			{
				id:"2",
				weight:1,
				title:"标题2", 
				commentCounts:123,
				viewCounts:123,
				summary:"概要11",
				author:"作者",
				tags:[{"tagName":"vue"}],
				createDate:"111"
			},
			{
				id:"3",
				weight:1,
				title:"标题3",
				commentCounts:123,
				viewCounts:123,
				summary:"概要11",
				author:"作者",
				tags:[{"tagName":"vue"}],
				createDate:"222"
			}
		]
      }
    },
~~~

## 2.7 下拉进行分页组件

> 文章列表是一个分页列表，这里我们需要实现，下拉分页，即如果拉到底部，就会请求下一页的数据，如果有数据就加载出来，如果没数据，就证明到达最后一页



新建scrollpage/index.vue

加载框：https://element.eleme.cn/#/zh-CN/component/loading#options

~~~js
<template>

  <div ref="scroll" id="scroll-page" style="overflow: hidden">
    <slot></slot>
	<!--loading动画，加载的数据的过程中显示 elementui load-->
    <div
      style="height: 40px;margin-top: 10px;z-index: 1"
      v-loading="loading"
      element-loading-text="拼命加载中"
      element-loading-spinner="el-icon-loading"
      element-loading-background="rgba(245,245,245)"></div>
  </div>

</template>

<script>
  export default {
    props: {
      loading: Boolean,
      noData: Boolean,
      offset: Number
    },
    name: "index",
    mounted() {
		//绑定事件监听，滚动的时候触发
      window.addEventListener('scroll', this.handleScroll, false);
    },
    beforeDestroy() {
		//移出事件监听
      window.removeEventListener('scroll', this.handleScroll)
    },
    data() {
      return {
        scrollAction: {
          x: 'undefined',
          y: 'undefined'
        }
      }
    },
    methods: {
      handleScroll(e) {
        var that = this
		//
        if (!that.noData) {
			//如果有数据，触发
          let curHeight = document.documentElement.scrollTop || document.body.scrollTop
          //获取div区域
		  var scrollPage = document.getElementById('scroll-page');
			
          if ((curHeight + window.innerHeight >= that.$refs.scroll.offsetHeight + that.offset) && that.isDownDirection()) {
            //判断是否到达底部
			if (!that.loading) {
				//调用load加载数据
              	that.$emit('load')
            }
          }
        }
      },
      isDownDirection() {
        if (typeof this.scrollAction.x == 'undefined') {
          this.scrollAction.x = window.pageXOffset;
          this.scrollAction.y = window.pageYOffset;
        }
        var diffX = this.scrollAction.x - window.pageXOffset;
        var diffY = this.scrollAction.y - window.pageYOffset;

        this.scrollAction.x = window.pageXOffset;
        this.scrollAction.y = window.pageYOffset;

        if (diffX < 0) {
          // Scroll right
        } else if (diffX > 0) {
          // Scroll left
        } else if (diffY < 0) {
          // Scroll down
          return true
        } else if (diffY > 0) {
          // Scroll up
        } else {
          // First scroll event
        }
        return false
      }

    }
  }
</script>

<style scoped>

</style>

~~~



## 2.8 文章列表改进

在views下新建common文件夹，其中新建ArticleScrollPage.vue, 将文章列表放入滚动分页区域内

~~~html
<template>
  <scroll-page :loading="loading" :offset="offset" :no-data="noData" v-on:load="load">
    <article-item v-for="article in articles" :key="article.id" v-bind="article">
	</article-item>
  </scroll-page>
</template>

<script>
  import ArticleItem from '@/components/article/ArticleItem'
  import ScrollPage from '@/components/scrollpage'

  export default {
    name: "ArticleScrollPage",
    props: {
      offset: {
        type: Number,
        default: 0
      }
    },
    watch: {
    },
    created() {
      this.getArticles()
    },
    data() {
      return {
        loading: false,
        noData: false,
		//分页信息
        innerPage: {
          pageSize: 5,
          page: 1,
          name: 'a.createDate',
          sort: 'desc'
        },
		//文章列表
        articles: []
      }
    },
    methods: {
      load() {
		  //下拉触发分页的时候 进行接口加载
		  alert("触发分页")
        this.getArticles()
      },
      getArticles() {
        let that = this
        that.loading = true
		that.articles = that.articles.concat([
			{
				id:"1",
				weight:1,
				title:"标题1",
				commentCounts:123,
				viewCounts:123,
				summary:"概要11",
				author:"作者",
				tags:[{"tagName":"vue"}],
				createDate:"3333"
			},
			{
				id:"232",
				weight:1,
				title:"标题1",
				commentCounts:123,
				viewCounts:123,
				summary:"概要11",
				author:"作者",
				tags:[{"tagName":"vue"}],
				createDate:"3333"
			},
			{
				id:"2",
				weight:1,
				title:"标题2", 
				commentCounts:123,
				viewCounts:123,
				summary:"概要11",
				author:"作者",
				tags:[{"tagName":"vue"}],
				createDate:"11111"
			},
			{
				id:"3",
				weight:1,
				title:"标题3",
				commentCounts:123,
				viewCounts:123,
				summary:"概要11",
				author:"作者",
				tags:[{"tagName":"vue"}],
				createDate:"2222"
			},
			{
				id:"4",
				weight:1,
				title:"标题3",
				commentCounts:123,
				viewCounts:123,
				summary:"概要11",
				author:"作者",
				tags:[{"tagName":"vue"}],
				createDate:"2222"
			},
			{
				id:"5",
				weight:1,
				title:"标题3",
				commentCounts:123,
				viewCounts:123,
				summary:"概要11",
				author:"作者",
				tags:[{"tagName":"vue"}],
				createDate:"2222"
			},
			{
				id:"6",
				weight:1,
				title:"标题3",
				commentCounts:123,
				viewCounts:123,
				summary:"概要11",
				author:"作者",
				tags:[{"tagName":"vue"}],
				createDate:"2222"
			},
			{
				id:"7",
				weight:1,
				title:"标题3",
				commentCounts:123,
				viewCounts:123,
				summary:"概要11",
				author:"作者",
				tags:[{"tagName":"vue"}],
				createDate:"2222"
			},
			{
				id:"8",
				weight:1,
				title:"标题3",
				commentCounts:123,
				viewCounts:123,
				summary:"概要11",
				author:"作者",
				tags:[{"tagName":"vue"}],
				createDate:"2222"
			}
		]);
		
		that.loading = false

      }
    },
    components: {
      'article-item': ArticleItem,
      'scroll-page': ScrollPage
    }

  }
</script>

<style scoped>
  .el-card {
    border-radius: 0;
  }

  .el-card:not(:first-child) {
    margin-top: 10px;

  }
</style>

~~~

首页变更：

~~~html
<template>
  <div v-title data-title="码神之路-blog">
    <el-container>

      <el-main class="me-articles">
			<ArticleScrollPage></ArticleScrollPage>
      </el-main>

      <el-aside>
			侧边栏,右侧
      </el-aside>

    </el-container>
  </div>
</template>

<script>
 import ArticleScrollPage from '@/views/common/ArticleScrollPage.vue'
  export default {
    name: 'Index',
    created() {
    },
    data() {
      return {
      }
    },
    methods: {
    },
    components: {
		ArticleScrollPage
    }
  }
</script>

<style scoped>

  .el-container {
    width: 960px;
  }

  .el-aside {
    margin-left: 20px;
  }

  .el-main {
    padding: 0px;
    line-height: 16px;
  }

  .el-card {
    border-radius: 0;
  }

  .el-card:not(:first-child) {
    margin-top: 20px;
  }
</style>

~~~

## 2.9 数据请求

> 接下来，我们需要将文章数据变成动态的，也就是通过发ajax请求，从后端请求数据，并进行展示。

**后端-是码神之路博客系统，已经实现好的**

> 发起http请求我们使用axios: 易用、简洁且高效的http库
>
> http://www.axios-js.com/zh-cn/docs/vue-axios.html

加入依赖：

~~~json
npm install --save axios vue-axios
~~~

~~~js
//将下面代码 加入 main.js
import Vue from 'vue'
import axios from 'axios'
import VueAxios from 'vue-axios'

Vue.use(VueAxios, axios)
~~~

然后就可以按照 下面的方式 使用：

~~~js
Vue.axios.get(api).then((response) => {
    //response.data == 后台返回的数据
  console.log(response.data)
})

this.axios.get(api).then((response) => {
  console.log(response.data)
})

this.$http.get(api).then((response) => {
  console.log(response.data)
})
~~~

> 在ArticleScrollPage的getArticles中 发起请求

~~~js
getArticles() {
        let that = this
        that.loading = true
		this.axios.post("http://localhost:8888/articles/findArticlePage",this.innerPage).then((res)=>{
			if(res.data.success){
				if(res.data.data.length <= 0){
					that.noData = true;
				}else{
					this.articles = this.articles.concat(res.data.data);
                    this.innerPage.page += 1;
				}
			}else{
				that.$message({type: 'error', message: res.data.message, showClose: true})
			}
			
		}).catch((err)=>{
			//有报错
			that.$message({type: 'error', message: '文章加载失败!', showClose: true})
			
		}).finally(()=>{
			this.loading = false;
		});
		

      }
~~~

## 2.10 统一请求处理

> 上面我们的请求路径写的比较死，如果更换ip和port的话，需要在代码中到处更改，我们应该将其提取出去

在src下创建request文件夹，在其下创建index.js：

~~~js
import axios from 'axios'

const service = axios.create({
  baseURL: "http://localhost:8888",
  timeout: 10000
})

export default service
~~~

在src下创建api文件夹，在其下创建article.js：

~~~js
import request from "@/request"

export function getArticles(page) {
	return request({
		  method: 'post',
		  url: '/articles/findArticlePage',
		  data: page
		})
}
~~~

更改ArticleScrollPage.vue中的请求:

~~~js
 import {getArticles} from '@/api/article'

getArticles(this.innerPage).then((res)=>{
			if(res.data.success){
				if(res.data.data.length <= 0){
					that.noData = true;
				}else{
					this.innerPage.page += 1;
					this.articles = this.articles.concat(res.data.data);
				}
			}else{
				that.$message({type: 'error', message: res.data.message, showClose: true})
			}
		}).catch((err)=>{
			//有报错
			that.$message({type: 'error', message: '文章加载失败!', showClose: true})
			
		}).finally(()=>{
			this.loading = false;
		});
~~~

# 3. 补全页面显示

## 3.1 我的信息卡片

src/card/CardMe.vue:

~~~js
<template>
  <el-card>
    <h1 class="me-author-name">码神之路</h1>
    <div class="me-author-description">
      <span><i class="el-icon-location-outline"></i> &nbsp;北京&海淀</span>
      <span><i class="me-icon-job"></i> &nbsp;java开发</span>
    </div>
    <div class="me-author-tool">
      <i @click="showTool(qq)" :title="qq.title" class="iconfont icon-qq"></i>
      <i @click="showTool(bilibili)" :title="bilibili.title" class="iconfont icon-bilibili-fill"></i>
    </div>
  </el-card>

</template>

<script>
  export default {
    name: 'CardMe',
    data() {
      return {
        qq: {title: 'QQ', message: '130823919'},
        bilibili: {
          title: '哔哩哔哩',
          message: '<a target="_blank" href="https://space.bilibili.com/473844125">https://space.bilibili.com/473844125</a>'
        }
      }
    },
    methods: {
      showTool(tool) {
        this.$message({
          duration: 0,
          showClose: true,
          dangerouslyUseHTMLString: true,
          message: '<strong>' + tool.message + '</strong>'
        });
      }
    }
  }
</script>

<style scoped>
  .me-author-name {
    text-align: center;
    font-size: 30px;
    border-bottom: 1px solid #00aaff;
  }

  .me-author-description {
    padding: 8px 0;
  }

  .me-icon-job {
    padding-left: 16px;
  }

  .me-author-tool {
    text-align: center;
    padding-top: 10px;
  }

  .me-author-tool i {
    cursor: pointer;
    padding: 4px 10px;
    font-size: 30px;
  }
</style>

~~~

在index.vue中引入：

~~~js
<template>
  <div v-title data-title="码神之路-blog">
    <el-container>

      <el-main class="me-articles">
			<ArticleScrollPage></ArticleScrollPage>
      </el-main>

      <el-aside>
			<CardMe></CardMe>
      </el-aside>

    </el-container>
  </div>
</template>

<script>
 import ArticleScrollPage from '@/views/common/ArticleScrollPage.vue'
 import CardMe from '@/components/card/CardMe.vue'
  export default {
    name: 'Index',
    created() {
    },
    data() {
      return {
      }
    },
    methods: {
    },
    components: {
		ArticleScrollPage,
		CardMe
    }
  }
</script>

<style scoped>

  .el-container {
    width: 960px;
  }

  .el-aside {
    margin-left: 20px;
  }

  .el-main {
    padding: 0px;
    line-height: 16px;
  }

  .el-card {
    border-radius: 0;
  }

  .el-card:not(:first-child) {
    margin-top: 20px;
  }
</style>

~~~

## 3.2 添加头和底

> 我们需要构建一个Home组件，将Header，Body，Footer整合在一起

Home.vue：

~~~js
<template>
  <div id="home">
    <el-container>

    	<base-header :activeIndex="activeIndex"></base-header>

		  <router-view class="me-container"/>

			<base-footer v-show="footerShow"></base-footer>

	  </el-container>

  </div>

</template>

<script>
import BaseFooter from '@/components/BaseFooter'
import BaseHeader from '@/views/BaseHeader'

export default {
  name: 'Home',
  data (){
  	return {
  			activeIndex: '/',
  			footerShow:true
  	}
  },
  components:{
  	'base-header':BaseHeader,
  	'base-footer':BaseFooter
  },
  beforeRouteEnter (to, from, next){
  	 next(vm => {
    	vm.activeIndex = to.path
  	})
  },
  beforeRouteUpdate (to, from, next) {
	  if(to.path == '/'){
	  	this.footerShow = true
	  }else{
	  	this.footerShow = false
	  }
	  this.activeIndex = to.path
	  next()
	}
}
</script>

<style>

.me-container{
  margin: 100px auto 140px;
}
</style>

~~~

BaseHeader.vue:

~~~js
<template>
  <el-header class="me-area">
    <el-row class="me-header">

      <el-col :span="4" class="me-header-left">
        <router-link to="/" class="me-title">
          <img src="../assets/img/logo.png" />
        </router-link>
      </el-col>

      <el-col v-if="!simple" :span="16">
        <el-menu :router=true menu-trigger="click" active-text-color="#00aaff" :default-active="activeIndex"
                 mode="horizontal">
          <el-menu-item index="/">首页</el-menu-item>
          <el-menu-item index="/category/all">文章分类</el-menu-item>
          <el-menu-item index="/tag/all">标签</el-menu-item>
          <el-menu-item index="/archives">文章归档</el-menu-item>

          <el-col :span="4" :offset="4">
            <el-menu-item index="/write"><i class="el-icon-edit"></i>写文章</el-menu-item>
          </el-col>

        </el-menu>
      </el-col>

      <template v-else>
        <slot></slot>
      </template>

      <el-col :span="4">
        <el-menu :router=true menu-trigger="click" mode="horizontal" active-text-color="#00aaff">

          <template v-if="!user.login">
            <el-menu-item index="/login">
              <el-button type="text">登录</el-button>
            </el-menu-item>
            <el-menu-item index="/register">
              <el-button type="text">注册</el-button>
            </el-menu-item>
          </template>

          <template v-else>
            <el-submenu index>
              <template slot="title">
                <img class="me-header-picture" :src="user.avatar"/>
              </template>
              <el-menu-item index @click="logout"><i class="el-icon-back"></i>退出</el-menu-item>
            </el-submenu>
          </template>
        </el-menu>
      </el-col>

    </el-row>
  </el-header>
</template>

<script>
  export default {
    name: 'BaseHeader',
    props: {
      activeIndex: String,
      simple: {
        type: Boolean,
        default: false
      }
    },
    data() {
      return {
		  user:{
			login:false,
			avatar:""
		  }
	  }
    },
    computed: {
    },
    methods: {
    }
  }
</script>

<style>
  .el-button{
    color: #00aaff;
  }

  .el-header {
    position: fixed;
    z-index: 1024;
    min-width: 100%;
    box-shadow: 0 2px 3px hsla(0, 0%, 7%, .1), 0 0 0 1px hsla(0, 0%, 7%, .1);
  }

  .me-title {
    margin-top: 10px;
    font-size: 24px;
  }

  .me-header-left {
    margin-top: 10px;
  }

  .me-title img {
    max-height: 2.4rem;
    max-width: 100%;
  }

  .me-header-picture {
    width: 36px;
    height: 36px;
    border: 1px solid #ddd;
    border-radius: 50%;
    vertical-align: middle;
    background-color: #00aaff;
  }
</style>

~~~

BaseFooter.vue:

~~~js
<template>
  <el-footer class="me-area">
    <div class="me-footer">
      <p>Designed by
        <strong>
          <router-link to="/" class="me-login-design-color">码神之路</router-link>
        </strong>
      </p>
    </div>
  </el-footer>

</template>

<script>

  export default {
    name: 'BaseFooter',
    data() {
      return {}
    },
    methods: {},
    mounted() {
    }
  }
</script>

<style>

  .el-footer {
    min-width: 100%;
    box-shadow: 0 -2px 3px hsla(0, 0%, 7%, .1), 0 0 0 1px hsla(0, 0%, 7%, .1);
    position: absolute;
    bottom: 0;
    left: 0;
    z-index: 1024;
  }

  .me-footer {
    text-align: center;
    line-height: 60px;
    font-family: 'Open Sans', sans-serif;
    font-size: 18px;

  }

  .me-login-design-color {
    color: #00aaff !important;
  }

</style>

~~~

修改路由：

~~~js
import Vue from 'vue'
import VueRouter from 'vue-router'
import Home from '@/Home'

Vue.use(VueRouter)

// 1. 定义 (路由) 组件。
// 可以从其他文件 import 进来


// 2. 定义路由
// 每个路由应该映射一个组件。
const routes = [
	{
	  path: '',
	  name: 'Home',
	  component: Home,
	  children: [
			{
			  path: '/',
			  component: r => require.ensure([], () => r(require('@/views/Index')), 'index')
			},
		],
	}
]
//3. 创建 router 实例，然后传 `routes` 配置
const router = new VueRouter({
	routes
})

export default router
~~~

**博客首页基本成型。**

