# 1. 最热标签

## 1.1 组件

components/card下创建CardTag.vue：

~~~js
<template>
  <el-card :body-style="{ padding: '8px 18px' }">
    <div slot="header" class="me-tag-header">
      <span>最热标签</span>
      <a @click="moreTags" class="me-pull-right me-tag-more">查看全部</a>
    </div>

    <ul class="me-tag-list">
      <li class="me-tag-item" v-for="t in tags" :key="t.id">
        <!--type="primary"-->
        <el-button @click="tag(t.id)" size="mini" type="primary" round plain>{{t.tagName}}</el-button>
      </li>
    </ul>
  </el-card>

</template>

<script>
  export default {
    name: 'CardTag',
    props: {
      tags: Array
    },
    data() {
      return {}
    },
    methods: {
      moreTags() {
        this.$router.push('/tag/all')
      },
      tag(id) {
        this.$router.push({path: `/tag/${id}`})
      }
    }
  }
</script>

<style scoped>

  .me-tag-header {
    font-weight: 600;
  }

  .me-tag-more {
    font-size: 14px;
    color: #78b6f7;
  }

  .me-tag-list {
    list-style-type: none;
  }

  .me-tag-item {
    display: inline-block;
    padding: 4px;
    font-size: 14px;
    color: #5FB878;
  }

  .me-tag-item a:hover {
    text-decoration: underline;
  }
</style>

~~~

> 上面有两个触发方法，一个是查看全部的tag，跳转到/tag/all，一个是查看标签下的文章，跳转到/tag/{tagId}
>
> 需要外部传值 tags，标签列表，其中Tag必须有id，tagName这两个属性

## 1.2 添加到侧边栏

index.vue:

~~~js
<template>
	<div>
			
			<el-container>
			  
			  <el-main class="me-articles">
				<ArticleScrollPage>
					
				</ArticleScrollPage>
			  </el-main>
			  <el-aside>
				  <CardMe></CardMe>
				  <card-tag :tags="hotTags"></card-tag>
			  </el-aside>
			</el-container>
		</div>
</template>

<script>
	import ArticleScrollPage from "@/components/common/ArticleScrollPage.vue"
	import CardMe from '@/components/card/CardMe.vue'
	import CardTag from '@/components/card/CardTag.vue'
	import {getHotTags} from '@/api/tag'
	export default{
		data() {
		  return {
			  hotTags: []
		  }    
		},
		created(){
			this.getHotTags();
		},
		methods:{
			getHotTags(){
				//发起http请求 请求后端的数据
				getHotTags().then((res)=>{
					////res.data = Result (success,msg,data)
					if(res.data.success){
						this.hotTags = res.data.data;
					}else{
						this.$message.error(res.data.msg);
					}
				}).catch((err)=>{
					this.$message.error("系统错误");
				}).finally(()=>{
				})
			}
		},
		components:{
			ArticleScrollPage,
			CardMe,
			"card-tag":CardTag
		}
	}
</script>

<style scoped>

  .el-container {
    width: 960px;
  }

  .el-aside {
    margin-left: 20px;
    width: 260px;
  }

  .el-main {
    padding: 0px;
    line-height: 16px;
  }

  .el-card {
    border-radius: 0;
  }

  .el-card:not(:first-child) {
    margin-top: 20px;
  }
</style>

~~~

## 1.3 api

api/tag.js

~~~js
import request from '@/request'


export function getHotTags() {
  return request({
    url: '/tags/hot',
    method: 'get',
  })
}
~~~

# 2. 最热文章+最新文章

## 2.1 组件

CardArticle.vue:

~~~js
<template>
  <el-card :body-style="{ padding: '8px 18px' }">
    <div slot="header" class="me-category-header">
      <span>{{cardHeader}}</span>
    </div>

    <ul class="me-category-list">
      <li v-for="a in articles" @click="view(a.id)" :style="itemStyle" :key="a.id" class="me-category-item"><a>{{a.title}}</a>
      </li>
    </ul>
  </el-card>

</template>

<script>
  export default {
    name: 'CardArticle',
    props: {
      cardHeader: {
        type: String,
        required: true
      },
      articles: {
        type: Array,
        required: true
      },
      itemStyle: Object
    },
    data() {
      return {}
    },
    methods: {
      view(id) {
        this.$router.push({path: `/view/${id}`})
      }
    }
  }
</script>

<style scoped>
  .me-category-header {
    font-weight: 600;
  }

  .me-category-list {
    list-style-type: none;
  }

  .me-category-item {
    padding: 4px;
    font-size: 14px;
    color: #5FB878;
  }

  .me-category-item a:hover {
    text-decoration: underline;
  }
</style>

~~~

## 2.2 添加到侧边栏

~~~html
<template>
	<div>
			
			<el-container>
			  
			  <el-main class="me-articles">
				<ArticleScrollPage>
					
				</ArticleScrollPage>
			  </el-main>
			  <el-aside>
				  <CardMe></CardMe>
				  <card-tag :tags="hotTags"></card-tag>
				  <card-article cardHeader="最热文章" :articles="hotArticles"></card-article>
				  <card-article cardHeader="最新文章":articles="newArticles"></card-article>
			  </el-aside>
			</el-container>
		</div>
</template>

<script>
	import ArticleScrollPage from "@/components/common/ArticleScrollPage.vue"
	import CardMe from '@/components/card/CardMe.vue'
	import CardTag from '@/components/card/CardTag.vue'
	import CardArticle from '@/components/card/CardArticle'
	import {getHotTags} from '@/api/tag'
	import {getHotArticles,getNewArticles} from '@/api/article'
	export default{
		data() {
		  return {
			  hotTags: [],
			  hotArticles: [],
			  newArticles: []
		  }    
		},
		created(){
			this.getHotTags();
			this.getHotArticles();
			this.getNewArticles();
		},
		methods:{
			getHotTags(){
				//发起http请求 请求后端的数据
				getHotTags().then((res)=>{
					////res.data = Result (success,msg,data)
					if(res.data.success){
						this.hotTags = res.data.data;
					}else{
						this.$message.error(res.data.msg);
					}
				}).catch((err)=>{
					this.$message.error("系统错误");
				}).finally(()=>{
				})
			},
			getHotArticles(){
				//发起http请求 请求后端的数据
				getHotArticles().then((res)=>{
					////res.data = Result (success,msg,data)
					if(res.data.success){
						this.hotArticles = res.data.data;
					}else{
						this.$message.error(res.data.msg);
					}
				}).catch((err)=>{
					this.$message.error("系统错误");
				}).finally(()=>{
				})
			},
			getNewArticles(){
				//发起http请求 请求后端的数据
				getNewArticles().then((res)=>{
					////res.data = Result (success,msg,data)
					if(res.data.success){
						this.newArticles = res.data.data;
					}else{
						this.$message.error(res.data.msg);
					}
				}).catch((err)=>{
					this.$message.error("系统错误");
				}).finally(()=>{
				})
			}
		},
		components:{
			ArticleScrollPage,
			CardMe,
			"card-tag":CardTag,
			"card-article":CardArticle
		}
	}
</script>

<style scoped>

  .el-container {
    width: 960px;
  }

  .el-aside {
    margin-left: 20px;
    width: 260px;
  }

  .el-main {
    padding: 0px;
    line-height: 16px;
  }

  .el-card {
    border-radius: 0;
  }

  .el-card:not(:first-child) {
    margin-top: 20px;
  }
</style>

~~~

## 2.3 api

~~~js
import request from "@/request"


export function getHotArticles() {
  return request({
    url: '/articles/hot',
    method: 'post'
  })
}

export function getNewArticles() {
  return request({
    url: '/articles/new',
    method: 'post'
  })
}

~~~

# 3. 文章归档

## 3.1 组件

CardArchive.vue:

~~~js
<template>

  <el-card :body-style="{ padding: '8px 18px' }">
    <div slot="header" class="me-category-header">
      <span>{{cardHeader}}</span>
    </div>

    <ul class="me-category-list">
      <li v-for="a in archives" @click="view(a.year, a.month)" :key="a.year + a.month" class="me-category-item"><a>{{`${a.year}年${a.month}月(${a.count})`}}</a>
      </li>
    </ul>
  </el-card>

</template>

<script>
  export default {
    name: "CardArchive",
    props: {
      cardHeader: {
        type: String,
        required: true
      },
      archives: {
        type: Array,
        required: true
      }
    },
    methods: {
      view(year, month) {
        this.$router.push({path: `/archives/${year}/${month}`})
      }
    }
  }
</script>

<style scoped>

  .me-category-header {
    font-weight: 600;
  }

  .me-category-list {
    list-style-type: none;
  }

  .me-category-item {
    display: inline-block;
    width: 40%;
    padding: 4px;
    font-size: 14px;
    color: #5FB878;
  }

  .me-category-item a:hover {
    text-decoration: underline;
  }

</style>

~~~

## 3.2 添加到侧边栏

~~~html
<template>
	<div>
			
			<el-container>
			  
			  <el-main class="me-articles">
				<ArticleScrollPage>
					
				</ArticleScrollPage>
			  </el-main>
			  <el-aside>
				  <CardMe></CardMe>
				  <card-tag :tags="hotTags"></card-tag>
				  <card-article cardHeader="最热文章" :articles="hotArticles"></card-article>
				  <card-archive cardHeader="文章归档" :archives="archives"></card-archive>
				  <card-article cardHeader="最新文章":articles="newArticles"></card-article>
			  </el-aside>
			</el-container>
		</div>
</template>

<script>
	import ArticleScrollPage from "@/components/common/ArticleScrollPage.vue"
	import CardMe from '@/components/card/CardMe.vue'
	import CardTag from '@/components/card/CardTag.vue'
	import CardArticle from '@/components/card/CardArticle'
	import CardArchive from '@/components/card/CardArchive'
	import {getHotTags} from '@/api/tag'
	import {getHotArticles,getNewArticles,getArchives} from '@/api/article'
	export default{
		data() {
		  return {
			  hotTags: [],
			  hotArticles: [],
			  newArticles: [],
			  archives:[]
		  }    
		},
		created(){
			this.getHotTags();
			this.getHotArticles();
			this.getNewArticles();
			this.getArchives();
			
		},
		methods:{
			getArchives(){
				//发起http请求 请求后端的数据
				getArchives().then((res)=>{
					////res.data = Result (success,msg,data)
					if(res.data.success){
						this.archives = res.data.data;
					}else{
						this.$message.error(res.data.msg);
					}
				}).catch((err)=>{
					this.$message.error("系统错误");
				}).finally(()=>{
				})
			},
			getHotTags(){
				//发起http请求 请求后端的数据
				getHotTags().then((res)=>{
					////res.data = Result (success,msg,data)
					if(res.data.success){
						this.hotTags = res.data.data;
					}else{
						this.$message.error(res.data.msg);
					}
				}).catch((err)=>{
					this.$message.error("系统错误");
				}).finally(()=>{
				})
			},
			getHotArticles(){
				//发起http请求 请求后端的数据
				getHotArticles().then((res)=>{
					////res.data = Result (success,msg,data)
					if(res.data.success){
						this.hotArticles = res.data.data;
					}else{
						this.$message.error(res.data.msg);
					}
				}).catch((err)=>{
					this.$message.error("系统错误");
				}).finally(()=>{
				})
			},
			getNewArticles(){
				//发起http请求 请求后端的数据
				getNewArticles().then((res)=>{
					////res.data = Result (success,msg,data)
					if(res.data.success){
						this.newArticles = res.data.data;
					}else{
						this.$message.error(res.data.msg);
					}
				}).catch((err)=>{
					this.$message.error("系统错误");
				}).finally(()=>{
				})
			}
		},
		components:{
			ArticleScrollPage,
			CardMe,
			"card-tag":CardTag,
			"card-article":CardArticle,
			"card-archive":CardArchive
		}
	}
</script>

<style scoped>

  .el-container {
    width: 960px;
  }

  .el-aside {
    margin-left: 20px;
    width: 260px;
  }

  .el-main {
    padding: 0px;
    line-height: 16px;
  }

  .el-card {
    border-radius: 0;
  }

  .el-card:not(:first-child) {
    margin-top: 20px;
  }
</style>

~~~



## 3.3 Api

~~~js
export function getArchives() {
  return request({
    url: '/articles/listArchives',
    method: 'post'
  })
}
~~~

# 4. 文章分类

## 4.1 组件

~~~js
<template>
	<div class="me-allct-body" v-title :data-title="categoryTagTitle" >
	    <el-container class="me-allct-container">
	      <el-main>
	        <el-tabs v-model="activeName">
	          <el-tab-pane label="文章分类" name="category">
	            <ul class="me-allct-items">
	              <li v-for="c in categorys" @click="view(c.id)" :key="c.id" class="me-allct-item">
	                <div class="me-allct-content">
	                  <a class="me-allct-info">
	                    <img class="me-allct-img" :src="c.avatar?c.avatar:defaultAvatar"/>
	                    <h4 class="me-allct-name">{{c.categoryName}}</h4>
	                    <p class="me-allct-description">{{c.description}}</p>
	                  </a>
	
	                  <div class="me-allct-meta">
	                    <span>{{c.articles}} 文章</span>
	                  </div>
	                </div>
	              </li>
	            </ul>
	          </el-tab-pane>
	          <el-tab-pane label="标签" name="tag">
	            <ul class="me-allct-items">
	              <li v-for="t in tags" @click="view(t.id)" :key="t.id" class="me-allct-item">
	                <div class="me-allct-content">
	                  <a class="me-allct-info">
	                    <img class="me-allct-img" :src="t.avatar?t.avatar:defaultAvatar"/>
	                    <h4 class="me-allct-name">{{t.tagName}}</h4>
	                  </a>
	
	                  <div class="me-allct-meta">
	                    <span>{{t.articles}}  文章</span>
	                  </div>
	                </div>
	              </li>
	            </ul>
	          </el-tab-pane>
	        </el-tabs>
	      </el-main>
	    </el-container>
	  </div>
</template>

<script>
	import defaultAvatar from '@/assets/img/logo.png'
	import {listTagsDetail} from "@/api/tag"
	import {listCategorysDetail} from "@/api/category"
	export default {
		name: "BlogAllCategoryTag",
		data(){
			return {
				categorys: [],
				tags: [],
				activeName: "category",
				defaultAvatar : defaultAvatar
			}
		},
		computed:{
			activeName: {
				get(){
					return this.$router.params.type;
				},
				set(newValue){
					 this.activeName = newValue
				}
			},
			categoryTagTitle() {
				if(this.activeName == 'category'){
					return "文章分类-码神之路"
				}else{
					return "标签-码神之路"
				}
			}
		},
		created(){
			this.listCategorys();
			this.listTags();
		},
		methods:{
			//获取全部的分类列表
			listCategorys(){
				//发起http请求 请求后端的数据
				listCategorysDetail().then((res)=>{
					////res.data = Result (success,msg,data)
					if(res.data.success){
						this.categorys = res.data.data;
					}else{
						this.$message.error(res.data.msg);
					}
				}).catch((err)=>{
					this.$message.error("系统错误");
				}).finally(()=>{
				})
			},
			//获取全部的标签列表
			listTags(){
				//发起http请求 请求后端的数据
				listTagsDetail().then((res)=>{
					////res.data = Result (success,msg,data)
					if(res.data.success){
						this.tags = res.data.data;
					}else{
						this.$message.error(res.data.msg);
					}
				}).catch((err)=>{
					this.$message.error("系统错误");
				}).finally(()=>{
				})
			}
		}
	}
</script>

<style>
  .me-allct-body {
    margin: 60px auto 140px;
  }

  .me-allct-container {
    width: 1000px;
  }

  .me-allct-items {
    padding-top: 2rem;
  }

  .me-allct-item {
    width: 25%;
    display: inline-block;
    margin-bottom: 2.4rem;
    padding: 0 .7rem;
    box-sizing: border-box;
  }

  .me-allct-content {
    display: inline-block;
    width: 100%;
    background-color: #fff;
    border: 1px solid #f1f1f1;
    transition: border-color .3s;
    text-align: center;
    padding: 1.5rem 0;
  }

  .me-allct-info {
    cursor: pointer;
  }

  .me-allct-img {
    margin: -40px 0 10px;
    width: 60px;
    height: 60px;
    vertical-align: middle;

  }

  .me-allct-name {
    font-size: 21px;
    font-weight: 150;
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
    margin-top: 4px;
  }

  .me-allct-description {
    min-height: 50px;
    font-size: 13px;
    line-height: 25px;
  }

  .me-allct-meta {
    font-size: 12px;
    color: #969696;
  }
</style>

~~~

## 4.2 路由

~~~js
{
          path: '/:type/all',
          component: r => require.ensure([], () => r(require('@/views/blog/BlogAllCategoryTag')), 'blogallcategorytag')
        }
~~~

> 因为文章分类下，可以选择标签，所以type是需要传递的路径参数，如果是category，那么就显示所有分类，如果是tag，那么就显示所有标签

## 4.3 api

category.js

~~~js
import request from "@/request"


export function listCategorysDetail() {
	return request({
		  method: 'get',
		  url: '/categorys/detail'
		})
}
~~~

tag.js:

~~~js
import request from "@/request"

export function getHotTags() {
	return request({
		  method: 'get',
		  url: '/tags/hot'
		})
}
export function listTagsDetail() {
	return request({
		  method: 'get',
		  url: '/tags/detail'
		})
}
~~~

# 5. 图标路径设置

将static目录 放入public下

